# Django Team Starter

## Setup
```bash
python -m venv venv
source venv/bin/activate
pip install django==6.0.1
python manage.py migrate
python manage.py runserver
```

## Endpoints
- /           root check
- /healthz/   health check
- /admin/     django admin
# Team 16 Django Project


## **1. プロジェクト概要**

## 開発方針

| 項目 | 内容 |
| --- | --- |
| サーバーサイド | Python(Django) |
| フロントエンド | HTML / CSS（レスポンシブ） / JavaScript |
| データベース | SQLlite3 |
| バージョン管理 | GitHub |

## ユーザーストーリー

| アクター | 目標 / ユーザーストーリー |
| --- | --- |
| 🟦ゲスト | 継続的に記録を残したいから、簡単にユーザー登録をして利用を開始したい |
| 🟦ユーザー | 毎日の運動を振り返りたいから、運動内容・時間を記録として投稿したい |
| 🟦ユーザー | モチベーションを保ちたいから、他の人の運動記録を一覧で見たい |
| 🟦ユーザー | 反応が見えると嬉しいから、自分の投稿に付いたいいね数を確認したい |
| 🟩管理者 | 健全なコミュニティを維持したいから、全ユーザーを一覧で確認したい |
| 🟩管理者 | ルール違反に対応するため、問題のあるユーザーを停止・BANしたい |
| 🟩管理者 | 不適切な投稿を排除したいから、全投稿を管理・削除できるようにしたい |

---

## **2. 機能一覧**

## 🧑‍💻 ユーザー関連機能

| 機能ID | 機能名 | 概要 | 詳細内容 | 優先度 |
| --- | --- | --- | --- | --- |
| U-001 | ユーザー登録 | 新規ユーザーを登録 | メール・ユーザー名・パスワード登録 | High |
| U-002 | ログイン | 認証処理 | セッション管理 / 未ログイン制御 | High |
| U-003 | ログアウト | セッション終了 | ログアウト処理 | High |
| U-004 | プロフィール閲覧 | ユーザー情報表示 | アイコン・自己紹介・投稿履歴表示 | High |
| U-005 | プロフィール編集 | ユーザー情報編集 | アイコン画像・自己紹介更新 | Middle |
| U-006 | パスワード再設定 | PW再発行機能 | 再設定メール送信 / 新PW設定 | Middle |
| U-007 | アカウント削除 | ユーザー退会 | アカウント・関連データ削除 | Low |

---

## 🏃‍♂️ 運動記録（投稿）機能

| 機能ID | 機能名 | 概要 | 詳細内容 | 優先度 |
| --- | --- | --- | --- | --- |
| P-001 | 記録作成 | 運動内容を投稿 | タイトル・内容・運動時間 | High |
| P-002 | 記録一覧表示 | 投稿一覧を表示 | 他ユーザー含む全体タイムライン | High |
| P-003 | 記録詳細表示 | 投稿詳細を表示 | 投稿内容・いいね数表示 | High |
| P-004 | 記録編集 | 投稿内容修正 | 自分の投稿のみ編集可能 | Middle |
| P-005 | 記録削除 | 投稿削除 | 自分の投稿のみ削除可能 | Middle |

---

## ❤️ リアクション（自己肯定感向上）

| 機能ID | 機能名 | 概要 | 詳細内容 | 優先度 |
| --- | --- | --- | --- | --- |
| R-001 | いいね付与 | 投稿を応援 | 1ユーザー1投稿1いいね | High |
| R-002 | いいね解除 | 応援取消 | 再クリックで解除 | Middle |
| R-003 | いいね数表示 | 反応の可視化 | 投稿一覧・詳細に表示 | High |

---

## 👥 フォロー機能（Best）

| 機能ID | 機能名 | 概要 | 詳細内容 | 優先度 |
| --- | --- | --- | --- | --- |
| F-001 | フォロー | ユーザーをフォロー | フォロー/解除切替 | Middle |
| F-002 | フォロワー一覧 | フォロワー表示 | フォロワー・フォロー中一覧 | Low |

---

## 🔍 検索・表示補助機能（Best）

| 機能ID | 機能名 | 概要 | 詳細内容 | 優先度 |
| --- | --- | --- | --- | --- |
| S-001 | 投稿検索 | 投稿検索 | タイトル・内容で検索 | Low |
| S-002 | 投稿ソート | 並び替え | 新着順・いいね数順 | Low |

---

## 🔐 共通・システム機能

| 機能ID | 機能名 | 概要 | 詳細内容 | 優先度 |
| --- | --- | --- | --- | --- |
| C-001 | 未ログイン制限 | アクセス制御 | 未ログイン時はログイン画面へ | High |
| C-002 | ログイン後遷移制御 | 画面制御 | ログイン後トップ画面へ遷移 | High |

## 🔐 管理者機能

| 機能ID | 機能名 | 概要 | 詳細内容 | 優先度 |
| --- | --- | --- | --- | --- |
| A-000 | 管理者トップページ | 管理者機能 | 管理者用ダッシュボード / 各管理機能へのリンク表示 | High |
| A-001 | ユーザー一覧閲覧 | 管理者機能 | 全ユーザーを一覧表示 | High |
| A-002 | ユーザー停止/有効化 | 管理者機能 | ユーザーのログイン可否切替 | High |
| A-003 | ユーザーBAN | 管理者機能 | BAN設定・理由・日時登録 | High |
| A-004 | 投稿一覧管理 | 管理者機能 | 全投稿を一覧表示 | High |
| A-005 | 投稿削除（管理者権限） | 管理者機能 | 任意投稿を削除可能 | High |

## **3. ユースケース記述**

| UC-ID | ユースケース名 | アクター | 概要 | 事前条件 | 基本フロー | 代替フロー | 事後条件 |
| --- | --- | --- | --- | --- | --- | --- | --- |
| UC01 | ユーザー登録 | ゲスト | 新規アカウントを作成する | なし | ①登録画面を開く → ②ユーザー名・メール・パスワード入力 → ③確認 → ④登録完了 | メールアドレス重複 | アカウントが作成される |
| UC02 | ログイン | ゲスト | 登録済みアカウントでログインする | アカウント登録済み | ①ログイン画面 → ②メール/PW入力 → ③認証 → ④トップ画面へ遷移 | PW誤り / 未登録 | ログイン状態になる |
| UC03 | 投稿一覧閲覧（トップ画面） | ユーザー | 他ユーザーの投稿を閲覧する | ログイン済み | ①トップ画面を開く → ②投稿一覧を表示 | なし | 投稿一覧が確認できる |
| UC04 | 投稿詳細閲覧 | ユーザー | 投稿の詳細情報を閲覧する | 投稿が存在 | ①投稿一覧から選択 → ②詳細画面表示 | 投稿削除済み | 投稿詳細が表示される |
| UC05 | 記録作成 | ユーザー | 運動記録を投稿する | ログイン済み | ①投稿作成画面 → ②タイトル・内容・運動時間→ ③投稿 | 入力不備 → エラー表示 | 投稿が作成される |
| UC06 | 記録編集 | ユーザー | 自分の投稿を編集する | 自分の投稿が存在 | ①投稿詳細画面 → ②編集選択 → ③内容修正 → ④保存 | 入力不備 → エラー表示 | 投稿内容が更新される |
| UC07 | 記録削除 | ユーザー | 自分の投稿を削除する | 自分の投稿が存在 | ①投稿詳細画面 → ②削除選択 → ③確認 → ④削除 | キャンセル | 投稿が削除される |
| UC08 | いいね追加 | ユーザー | 投稿にいいねをつける | 投稿が存在 | ①投稿詳細/一覧画面 → ②いいねボタンクリック | すでにいいね済 → 解除に切替 | 投稿にいいねが追加される |
| UC09 | いいね解除 | ユーザー | 投稿のいいねを取り消す | 投稿にいいね済 | ①投稿詳細/一覧画面 → ②いいね解除クリック | なし | いいねが解除される |
| UC10 | プロフィール閲覧 | ユーザー | 他ユーザー・自分のプロフィールを確認する | ユーザー存在 | ①プロフィール画面を開く | なし | プロフィール情報が表示される |
| UC11 | プロフィール編集 | ユーザー | 自分のプロフィール情報を編集する | ログイン済み | ①プロフィール編集画面 → ②自己紹介/アイコン更新 → ③保存 | 入力不備 → エラー表示 | プロフィールが更新される |
| UC12 | 自分の投稿一覧確認 | ユーザー | 自分の投稿履歴を確認する | ログイン済み | ①プロフィール画面 → ②投稿履歴表示 | なし | 投稿一覧が確認できる |
| UC13 | フォロー | ユーザー | 他ユーザーをフォローする | 対象ユーザーが存在 | ①プロフィール画面 → ②フォローボタン押下 | すでにフォロー済 → 解除に切替 | 対象ユーザーをフォロー |
| UC14 | フォロワー一覧確認 | ユーザー | 自分のフォロワー一覧を確認する | フォロワーが存在 | ①プロフィール画面 → ②フォロワー一覧を表示 | なし | フォロワー一覧が確認できる |
| UC15 | 投稿検索 | ユーザー | 投稿を検索する | 投稿が存在 | ①検索フォーム入力 → ②検索結果表示 | 条件変更 | 条件に合う投稿一覧が表示される |
| UC16 | 投稿ソート | ユーザー | 投稿を並び替え表示する | 投稿が存在 | ①ソート選択 → ②結果更新 | 条件変更 | 投稿が指定順で表示される |
| UC17 | ユーザー管理（管理者） | 管理者 | ユーザーを停止/有効化/BANする | 管理者ログイン済み | ①管理画面 → ②ユーザー選択 → ③停止/有効/BAN設定 | 誤操作キャンセル | ユーザー状態が更新される |
| UC18 | 投稿管理（管理者） | 管理者 | 投稿の削除や非表示設定を行う | 管理者ログイン済み | ①管理画面 → ②投稿選択 → ③削除 / 非公開設定 | キャンセル | 投稿が非公開または削除される |

## **4. URLマッピング**

## 認証（Authentication）

| URL | メソッド | 機能 |
| --- | --- | --- |
| **/login/** | GET | ログイン画面表示 |
| **/login/** | POST | ログイン認証 / セッション生成 |
| **/register/** | GET | 新規ユーザー登録画面表示 |
| **/register/** | POST | 新規登録処理 |
| **/register/complete/** | GET | 登録完了メッセージ表示 |

---

## 投稿（ExercisePost）

| URL | メソッド | 機能 |
| --- | --- | --- |
| **/posts/** | GET | 投稿一覧表示（トップ画面） |
| **/posts/create/** | GET | 投稿作成画面表示 |
| **/posts/create/** | POST | 投稿作成処理 |
| **/posts/{id}/** | GET | 投稿詳細表示 |
| **/posts/{id}/edit/** | GET | 投稿編集画面表示 |
| **/posts/{id}/edit/** | POST | 投稿更新処理 |
| **/posts/{id}/delete/** | POST | 投稿削除処理 |

---

## リアクション（Reaction）

| URL | メソッド | 機能 |
| --- | --- | --- |
| **/reaction/{post_id}/like/** | POST | いいね追加 |
| **/reaction/{post_id}/unlike/** | POST | いいね解除 |

---

## プロフィール（Profile）

| URL | メソッド | 機能 |
| --- | --- | --- |
| **/profile/{user_id}/** | GET | プロフィール表示（アイコン・自己紹介・投稿一覧） |
| **/profile/edit/** | GET | プロフィール編集画面表示 |
| **/profile/edit/** | POST | プロフィール更新処理 |

---

## フォロー（Follow / Best）

| URL | メソッド | 機能 |
| --- | --- | --- |
| **/follow/{user_id}/** | POST | ユーザーをフォロー |
| **/unfollow/{user_id}/** | POST | フォロー解除 |
| **/followers/{user_id}/** | GET | フォロワー一覧表示 |
| **/following/{user_id}/** | GET | フォロー中一覧表示 |

---

## 検索・ソート（Best）

| URL | メソッド | 機能 |
| --- | --- | --- |
| **/posts/search/** | GET | 投稿検索（タイトル・内容） |
| **/posts/sort/** | GET | 投稿ソート（新着順 / いいね順） |

## 管理者（Admin）

| URL | メソッド | 機能 |
| --- | --- | --- |
| **/admin/** | GET | 管理者トップページ |
| **/admin/users/** | GET | ユーザー一覧表示（管理者用） |
| **/admin/users/{id}/toggle/** | POST | ユーザー停止/有効化切替 |
| **/admin/users/{id}/ban/** | POST | ユーザーBAN設定 |
| **/admin/posts/** | GET | 投稿一覧表示（管理者用） |
| **/admin/posts/{id}/delete/** | POST | 投稿削除（管理者権限） |

## **5. 画面遷移図**

## **6. 画面レイアウト**

## **7. ER図**

![Untitled (2).png](attachment:98543c7e-8408-4ca6-be53-afbeb1c82ab6:Untitled_(2).png)

## **8. テーブル設計**

## **User（Django標準 + 拡張想定）**

| 項目名 | 型 | 制約 | 備考 |
| --- | --- | --- | --- |
| **id** | serial | PK | 自動生成 |
| **username** | varchar(150) | NOT NULL, UNIQUE | ログイン名 / 表示名としても使用 |
| **email** | varchar(254) | NOT NULL, UNIQUE | メールアドレス |
| **password** | varchar | NOT NULL | ハッシュ保存（Django標準） |
| **first_name** | varchar(150) | — | 標準フィールド |
| **last_name** | varchar(150) | — | 標準フィールド |
| **is_active** | boolean | NOT NULL, default=True | ログイン可否 |
| **is_staff** | boolean | NOT NULL, default=False | 管理画面アクセス権 |
| **is_superuser** | boolean | NOT NULL, default=False | Django 標準スーパーユーザー |
| **last_login** | timestamp | NULL可 | 最終ログイン日時 |
| **date_joined** | timestamp | NOT NULL | 登録日時 |

---

## **Profile（ユーザー拡張）**

| 項目名 | 型 | 制約 | 備考 |
| --- | --- | --- | --- |
| **id** | serial | PK | 自動生成 |
| **user_id** | int | FK → auth_user.id | 1対1関係 |
| **nickname** | varchar(50) | NOT NULL | 表示名 / ニックネーム |
| **icon** | varchar / ImageField | NULL可 | プロフィール画像 |
| **bio** | text | — | 自己紹介 |

---

## **AdminUserInfo（管理者用追加情報 / BANなど）**

| 項目名 | 型 | 制約 | 備考 |
| --- | --- | --- | --- |
| **id** | serial | PK | 自動生成 |
| **user_id** | int | FK → auth_user.id | 対象ユーザー |
| **banned** | boolean | NOT NULL, default=False | BAN状態 |
| **ban_reason** | text | NULL可 | BAN理由 |
| **banned_at** | timestamp | NULL可 | BAN実施日時 |
| **banned_by_admin_id** | int | FK → auth_user.id, NULL可 | BANを実施した管理者 |

---

## **ExercisePost（運動記録 / 投稿）**

| 項目名 | 型 | 制約 | 備考 |
| --- | --- | --- | --- |
| **id** | serial | PK | 自動生成 |
| **user_id** | int | FK → auth_user.id | 投稿者 |
| **title** | varchar(255) | NOT NULL | 投稿タイトル |
| **content** | text | NOT NULL | 投稿内容 |
| **duration** | int | NOT NULL | 運動時間（分） |
| **image** | varchar / ImageField | NULL可 | 投稿画像（任意） |
| **created_at** | timestamp | NOT NULL, auto_now_add=True | 作成日時 |
| **updated_at** | timestamp | NOT NULL, auto_now=True | 更新日時 |

---

## **Reaction（いいね）**

| 項目名 | 型 | 制約 | 備考 |
| --- | --- | --- | --- |
| **id** | serial | PK | 自動生成 |
| **user_id** | int | FK → auth_user.id | いいねしたユーザー |
| **post_id** | int | FK → ExercisePost.id | 対象投稿 |
| **unique_together** | — | user_id + post_id | 1ユーザー1投稿1いいね制約 |

---

## **Follow（フォロー機能）**
